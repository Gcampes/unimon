function Game(socket){var _io=socket,$roomList=$("#roomList");this.listRooms=function(){$.get("/rooms",function(data){var pattern='<tr><td>%s</td><td>%s</td><td>%s</td><td><button data-action="join-room" data-param="%s" type="button" class="btn btn-default btn-xs">Entrar</button></td></tr>',newContent="";data.length>0?$.each(data,function(i,row){var rowStr=pattern.replace("%s",row.ref).replace("%s",row.name).replace("%s",row.count).replace("%s",row.ref);newContent+=rowStr}):newContent='<tr><td colspan="3">Nenhum campo dispon√≠vel</td></tr>',$roomList.html(newContent)})},this.newRoom=function(name){$.post("/rooms",{name:name},this.listRooms)},this.joinRoom=function(id){_io.emit("join",{roomId:id}),this.listRooms()}}var socket=io.connect("http://127.0.0.1:1337/"),Game=new Game(socket);$(function(){Game.listRooms(),$(document).on("click","[data-action]",function(e){e.preventDefault();var _self=$(this),_action=_self.data("action"),_param=_self.data("param")||null;switch(_action){case"new-room":var inpt=_self.siblings("input[name=room-name]");Game.newRoom(inpt.val()),inpt.val(null);break;case"join-room":Game.joinRoom(_param);break;case"refresh-rooms":Game.listRooms()}}),socket.on("message",function(data){$("#log").append(data.message+"<br/>")})});